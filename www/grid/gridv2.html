<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="ie ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--><html lang="en"> <!--<![endif]-->
<head>

	<!-- Basic Page Needs
  ================================================== -->
	<meta charset="utf-8">
	<title>Stack view</title>
	<meta name="description" content="">
	<meta name="author" content="">

	<!-- Mobile Specific Metas
  ================================================== -->
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<!-- CSS
  ================================================== -->
	<link rel="stylesheet" href="stylesheets/base.css">
	<link rel="stylesheet" href="stylesheets/skeleton.css">
	<link rel="stylesheet" href="stylesheets/layout.css">
	<link rel="stylesheet" href="stylesheets/style.css">

	<!--[if lt IE 9]>
		<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->

	<!-- Favicons
	================================================== -->
	<link rel="shortcut icon" href="images/favicon.ico">
	<link rel="apple-touch-icon" href="images/apple-touch-icon.png">
	<link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">

<script src="../map_view/assets/jquery-latest.js"></script>
<script src="../map_view/assets/gdp_sample_by_region.js"></script>
<script src="../map_view/assets/jquery-ui.js"></script>
<script src="../map_view/themes/base/jquery-ui.css"></script>
<!-- Only works on browser -->
 <script>
  $(function() {
    $( document ).tooltip();
  });
  </script>
  <style>
  label {
    display: inline-block;
    width: 5em;
  }
  </style>
</head>
<body>



	<!-- Primary Page Layout
	================================================== -->

	<!-- Delete everything in this .container and get started on your own site! -->

	<!-- <div class="container"> -->
		<div class="sixteen columns">
			<h1 id = "titleh1" class="remove-bottom" style="margin-top: 40px">GDP</h1>
			<hr />
		</div>
		<div id="single-country-container" class="sixteen columns">
		</div>
		
	<!-- </div>container -->

<!-- Templates for JS to generate -->
<div id = 'single-country-template' class="single-country"></div>
<!-- End of templates for JS to generate -->

<script>

var container = $("#single-country-container");
var node = $("#single-country-template");

if (gdp_sample){
	gdp_sample = gdp_sample['africa_en_south'];
	var countries = Object.keys(gdp_sample);
	var count = countries.length;

// attempting to sort them
//hackerish solution
arr = [];
for (var i = countries.length - 1; i >= 0; i--) {
	arr.push({key:countries[i], val:gdp_sample[countries[i]]});
};

// arr = arr.sort(function(a,b){
// 	return b.val - a.val; // sort by descending
// });
var maxValue = arr[0]['val'];

arr = arr.sort(function(a,b){
	return a.val - b.val; // sort by ascending
});

var debugObj;
// $('#titleh1').append(winWidth + "<br>" + winHeight);
var winWidth = $(window).width();
var winHeight = $(window).height();
var maxValue = arr[count-1]['val'];
		console.log(arr[count-1]['val'],maxValue);

	for (var i =  0; i < count; i++) {
		var temp = node.clone();
		var country = arr[i]['key'];
		var tempValue= gdp_sample[country]/maxValue;
		// var widthV = 'calc(calc(' + (tempValue).toFixed(0).toString()+'% - 20px) + 20px)';

		var widthV = (winWidth-18)*tempValue + 16;
		var heightV = (winHeight-15)*tempValue + 13;
		console.log(widthV);
		// console.log('-webkit-calc(' + (tempValue).toFixed(2).toString()+'% - 20px);');
		temp.attr('id', "gdp-" + country.toLowerCase() );
		// temp.attr('title', "gdp-" +  ); // not working
		temp.css('width', widthV);
		temp.css('height',heightV);
		temp.css('z-index',count-i);
		// temp.append('<img src="images/manwoman.png" alt="AF" width="100%">');
		temp.append('<img src="../country_flag_png/'+country+'.png" alt="AF" style="width:18;height:12;right:0;bottom:0;position:absolute;">');
		// temp.append(document.createTextNode( "Country: "+ country + " GDP: " + gdp_sample[country] ));
		container.append(temp);
		debugObj = temp;
		};
	container.append(document.createElement('hr'));

}


</script>


<!-- End Document
================================================== -->
</body>
</html>